<!DOCTYPE html><html><head><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/default.min.css"/><link rel="stylesheet" href="tufte-css/tufte.css"/><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Attempt to ‚ÄúDeep Research‚Äù in Hong Kong Law</title><style type="text/css">
                                        .toc-3 { margin-left: 2rem; }
                                        .toc-4 { margin-left: 4rem; }
                                </style></head><body><article><h1>Attempt to ‚ÄúDeep Research‚Äù in Hong Kong Law</h1><p class="subtitle">Ray Yip</p><p><label for="toc" class="margin-toggle">‚äï Table of Contents</label><input id="toc" type="checkbox" class="margin-toggle"/><span class="marginnote"><strong>Table of Contents</strong><br/><a class="toc-2" href="#id1">Introduction</a><br/><a class="toc-2" href="#id2">The Problem Statement</a><br/><a class="toc-2" href="#id3">What is relevant?</a><br/><a class="toc-2" href="#id4">Proposed System</a><br/><a class="toc-2" href="#id5">Eval-first</a><br/><a class="toc-2" href="#id6">Filtering</a><br/><a class="toc-2" href="#id7">Conclusion</a><br/></span></p><p>Published @ June 15, 2025 at 7:39 PM HKT</p><p>Updated @ September 20, 2025 at 21:01:03 HKT</p><h2 id="id1">Introduction</h2><p>I always want to automate legal research. Because (1) I always have to do it as a legal student and (2) people often ask me about their legal problems which law school simply doesn't teach.</p><p>The existing platforms available in Hong Kong either have limited search capabilities, e.g. mere keyword search, or is incredibly difficult, slow and user-hostile to navigate. From my own experience, the results returned are a list of full cases which are either mundanely relevant or unnecessarily cumbersome to digest in today‚Äôs standard.</p><p>In this article, I will outline my attempt to automate legal research, or at least, build a better alternative system than the current ones. Some of the problems I raised I do not really have a solution. I will nonetheless put them them for my future referencing purpose.</p><p>In the era of LLM, legal research sounds like a problem <a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation" title="">Retrieval Augmented Generation (‚Äú<strong>RAG</strong>‚Äú)</a> can solve <label for="id8" class="margin-toggle sidenote-number"/><input id="id8" type="checkbox" class="margin-toggle"><span class="sidenote">This might be better solved in future with pure LLM-driven approach e.g. <em>Self-Retrieval:Self-Retrieval: End-to-End Information Retrieval with One Large Language Model</em> . But as of the date of writing, retraining the LLM whenever a case is handed down or a legislation is updated is not quite sensible in terms of costs.</span></input>.</p><p>I understand RAG in simple language as:</p><div class="epigraph"><blockquote><p>A system that automatically CTRL-C and CTRL-V something relevant to the question and pass them to LLM for answer generation.</p></blockquote></div><p><figure><img src="2025-09-20_12-13-29.png" title=""/><figcaption>
                                                Fig. 1. An illustration of the RAG flow.</figcaption></figure></p><p>In our context, we just need to copy the relevant legal principles from a corpus of legal rules, put them into a reasonably intelligent LLM, simple! right?</p><p>Probably not. When the pool of documents <label for="id9" class="margin-toggle sidenote-number"/><input id="id9" type="checkbox" class="margin-toggle"><span class="sidenote">pool of documents = Case Law + Legislations in Hong Kong. ~ 150k+ Case Law (~0.5 billion tokens) and ~300k+ legislative sections.</span></input>  is large, deciding what is relevant becomes a hard problem.</p><p>Similarity search with vector embedding is the default position for most RAG system. But, you will note that embedding search has not yet replaced Google.</p><p><label for="id10" class="margin-toggle">‚äï</label><input id="id10" type="checkbox" class="margin-toggle"><span class="marginnote"><img src="2025-09-20_21-12-06.png" title=" google"/><a href="https://www.google.com/intl/en_us/search/howsearchworks/how-search-works/ranking-results/" title="">Signals used by google.</a></span></input></p><p>Google will have for sure integrated it, but their search engine is not just built on a vector database.</p><p>There are several functional and non-functional reasons:</p><ol start="1"><li>performance issue,</li><li>cost issue and</li><li>that useful information retrieval is a complex field full of nuances <label for="id11" class="margin-toggle">‚äï</label><input id="id11" type="checkbox" class="margin-toggle"><span class="marginnote">note the paper <em>On Theoretical Limitations of 
Embedding-Based Retrieval</em></span></input>.</li></ol><h2 id="id2">The Problem Statement</h2><p>Any legal advice to me begins with a search problem. Given any legal related problem, the first part of the problem solving process is always finding which legal principles are relevant.</p><p>Lawyers will call this as identifying the issues. The first step is always identifying the relevant legal frameworks, before that no meaningful legal or factual issues can be laid out.</p><p>The problem is hence simple: given a legal question, return the relevant laws.</p><p>But the question is: what is relevant?</p><h2 id="id3">What is relevant?</h2><p>Relevance is multi-dimensional. Assume you carry with you 40g of cocaine, wishing to sell your friend in Thailand, get caught in the HK airport and are charged with Trafficking in Dangerous Drugs (‚Äú<strong>TDD</strong>‚Äú). You are now worrying how long you might have to spend on jail.</p><p><figure><img src="https://media.newyorker.com/photos/590954696552fa0be682cb13/master/w_1920,c_limit/breaking-bad-meth.jpg" title=""/><figcaption>
                                                Fig. 3. from <em>breaking bad</em>.</figcaption></figure></p><p>A case can be relevant to your question for various reasons, and on different dimensions:</p><ol start="1"><li>The age of the offender in that case is similar to you.</li><li>It sets out the latest sentencing guideline for TDD in cocaine.</li><li>It ruled on the general approach in determining sentence for TDD.</li><li>It sets out mitigating factors for reducing sentence generally.</li><li>It applied one of the mitigating factors present in your case.</li><li>It discussed aggravating factors for increasing sentence generally.</li><li>...</li></ol><p>Usually, a common search strategy would look something like the following:</p><ol start="1"><li>Use keywords (e.g. the offence itself) to get a bunch of TDD sentence judgments.</li><li>Get a general idea of the sentence range by scanning through the cases.</li><li>Stumble across a longer case which looks like a key case of the offence.</li><li>Take note.</li><li>Scans which case resembles the client‚Äôs case at hand, based on different criteria listed above.</li><li>Check them out.</li><li>Dig out some more cases cited in cases collected so far.</li><li>Refine my search based on what I know so far.</li></ol><p>‚Äú<em>What is relevant</em>‚Äù <label for="id12" class="margin-toggle sidenote-number"/><input id="id12" type="checkbox" class="margin-toggle"><span class="sidenote">On the other hand, how many relevant results do we need? There can be 1000 cases that are relevant to our TDD case. We might not need all of them. Which portion of them are most needed?</span></input> cannot usually be determined with one single search. Instead, multiple search with different purposes has to be performed, in order to retrieve relevant information from the requisite different dimensions. However, this can be tedious to perform.</p><h2 id="id4">Proposed System</h2><p>To simulate the human search. There are five main components that I can think of:</p><ol start="1"><li>A set of tools that perform different types of search<ul><li>semantic search</li><li>keyword search</li><li>search by citation</li><li>...</li></ul></li><li>Filtering to cut down the search space</li><li>A simple workflow that <em>maps</em> queries from slightly different perspective and <em>reduces</em> them into a condensed summary.</li></ol><p>Taking references from different deep research workflows proposed by a number of interesting projects, for example:</p><p><figure><img src="2025-09-20_12-15-39.png" title=""/><figcaption>
                                                Fig. 4. Image from Jina.ai, which I come across at <a href="https://leehanchung.github.io/blogs/2025/02/26/deep-research/" title="">The Differences between Deep Research, Deep Research, and Deep Research</a>.</figcaption></figure></p><p><figure><img src="https://www.anthropic.com/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F1198befc0b33726c45692ac40f764022f4de1bf2-4584x2579.png&amp;w=3840&amp;q=75" title=""/><figcaption>
                                                Fig. 5. Image from Anthropic at <a href="https://www.anthropic.com/engineering/multi-agent-research-system" title="">Muti-Agent Research System</a></figcaption></figure></p><p>These seemingly complex agentic workflows purport to capture the multi-dimensional nature of the aforementioned <em>what is relevant</em> problem.</p><p>I am not fully convinced by the heated ‚ÄúLLM AI agents‚Äù paradigm nowadays. With LLM‚Äôs non-deterministic nature they usually fail at long horizon tasks. Nonetheless, a simple and short workflow, which query the database from different perspective, aggregate and summarize the results, may actually assist <label for="id13" class="margin-toggle sidenote-number"/><input id="id13" type="checkbox" class="margin-toggle"><span class="sidenote">Not replace.</span></input> legal practitioners effectively.</p><h2 id="id5">Eval-first</h2><p>I am sold by <a href="https://eugeneyan.com/writing/llm-patterns/#retrieval-augmented-generation-to-add-knowledge" title="">Eugene Yan</a> that evaluation is important for the quality of the system.</p><div class="epigraph"><blockquote><p>Building solid evals should be the starting point for any LLM-based system or product.</p><footer>Eugene Yan</footer>
</blockquote></div><p>The reason is simple. You get more informed feedback when you are nudging the system. It‚Äôs easier and more accurate to perform all sorts of testing e.g. A/B testing with a well-crafted evaluation dataset that roughly represents the input the system might encounter.</p><p>Curating high quality evaluation dataset is costly. But, ~100 data points can already provide a less subjective evaluation of the system.</p><p>One of the interesting evaluation method I came across is the <a href="https://arxiv.org/pdf/2504.15068" title="">Nugget Recall</a>. In simple terms, nugget is an atomic fact that should be included in an answer. Hence, we can measure the performance by counting how many ‚Äúnuggets‚Äù an answer to a query contains compared to the standard list of nuggets curated by expert that should appear in relation to a query.</p><p><figure><img src="2025-09-20_12-17-31.png" title=""/><figcaption>
                                                Fig. 6. Image from the linked paper.</figcaption></figure></p><p>In practice, I went with the Google Sheet approach outlined <a href="https://x.com/skylar_b_payne/status/1958352532193091742/photo/1" title="">here</a> as a quick start.</p><h2 id="id6">Filtering</h2><p>One of the limitations of vector search is that the bigger the search pool, the harder to retrieve relevant result.</p><p><figure><img src="2025-09-20_12-17-52.png" title=""/><figcaption>
                                                Fig. 7. An intuitive but naive explanation is that the bigger the document pool, the set of relevant documents become a smaller fraction of the total pool, and get easily crowded out by other marginally relevant results. <em>naive</em> because we did not consider dimensionality, combinations of relevance, the representation capacity of en embedding model ...etc.</figcaption></figure></p><p>The strategy we use to mitigate such limitation is simple: filtering. Based on the query or user input, the first step we should do is to narrow down the search space <label for="id14" class="margin-toggle sidenote-number"/><input id="id14" type="checkbox" class="margin-toggle"><span class="sidenote">Another approach could be to boost the discriminative power of the embedding model with data. Pure ml approach. Problem: need ample gpu resources and high quality dataset. We will see if we can do this later.</span></input>.</p><p>There are multiple approaches for efficient filtering that has come to my knowledge:</p><ol start="1"><li>Filter by Tag</li><li>Semantic IDs</li></ol><p><label for="id15" class="margin-toggle">‚äï</label><input id="id15" type="checkbox" class="margin-toggle"><span class="marginnote"><img src="2025-09-20_12-18-19.png" title=" taxonomy image"/>A giant table of content.</span></input></p><p><em>Filter by Tag</em> by only picking cases with tag matching the target topic, judgment type, court or offence.</p><p>But someone has to come up with the tags. Generating accurate and meaningful tag is feasible with LLM but relatively slow. Suppose it would take at least ~10s for 1 case to generate high-quality metadata. Now, 100K case means 1M seconds = 11 days, if performed consecutively! More importantly, who are going to verify and reconcile these generated tags?</p><p><a href="https://arxiv.org/abs/2306.08121" title=""><em>Semantic IDs</em></a> is an interesting approach explored by Google Deepmind for Youtube‚Äôs recommendation system. It is not exactly related to filtering but my intuition convinced me it seems relevant.</p><p>A semantic ID is a compact numerical sequence representation of an item‚Äôs hierarchical information (e.g. an 8-byte sequence that captures 8 levels and 256 topics) using the trie concept . The semantic ID is learned from the dense vector embedding of an item with an architecture called the RQ-VAE to quantize the content embedding into a discrete representation.</p><p>This is useful for a stage 2 training, which uses the Semantic IDs as the inputs to train another model which learn user behaviors. An IDs based approach captured the semantic learning while addressed the problem of lack of memorization ability (i.e. to remember a particular video is revealing to certain group of users) of content-based embedding (not as unique as ID).</p><p><figure><img src="2025-08-05_14-26-07.png" title=""/><figcaption>
                                                Fig. 9. Image 1 from the linked paper.</figcaption></figure></p><p><figure><img src="2025-09-20_12-18-53.png" title=""/><figcaption>
                                                Fig. 10. Image 2 from the linked paper.</figcaption></figure></p><p>The problem of Semantic IDs approach in our use case is that it is designed for item-to-item comparison; whereas what our use case needs is a query-to-item mapping. Even the semantic IDs are in place, the question of how do we map the query to the semantic IDs space remains unresolved.</p><p>However, in my opinion the trie based Semantic IDs concept is inspiring:</p><p><strong>pros</strong></p><ul><li>it organizes the items into hierarchical topics</li><li>it represents the hierarchical information very compactly for each item, either the implemented discrete representation, or the conceptual equivalent of using concatenated string: <span class="code">criminal_law, sexual_offence, indecent_assualt, ...</span></li><li>it supports hierarchical retrieval based on topics traversal at different level of granularity depending on the needs.</li></ul><p><strong>cons</strong></p><ul><li>only one topic at each level, but items sometimes share multiple topic even within the same level.</li><li>if implementing the unsupervised approach from the paper, takes time.</li><li>if using self-modified approach which only captures the concept of a semantic ID, the topic allocation at each level needs a classifier.</li></ul><h2 id="id7">Conclusion</h2><p>In this article, I have discussed the problem I want to solve in legal research and outlined my research and approach to the problem. Some of the features have already been implemented in <a href="https://chat.jist.space/landing" title="">JIST</a>, feel free to have a try.</p><p>If you have any thoughts on some of the problems I have raised in this article, your comments or DMs are most welcomed üòÉ.</p></article><script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js">//</script><script>
                                                try {
                                                        hljs.initHighlightingOnLoad();
                                                } catch(e) {
                                                        console.log(e);
                                                        }
                                        </script></body></html>